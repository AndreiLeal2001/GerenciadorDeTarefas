from tarefas import GerenciadorDeTarefas


def exibir_menu():
    """Exibe o menu de op√ß√µes para o usu√°rio."""
    print("\n--- MENU ---")
    print("1 - Listar tarefas")
    print("2 - Adicionar tarefa")
    print("3 - Concluir tarefa")
    print("4 - Excluir tarefa")
    print("5 - Editar tarefa")
    print("0 - Sair")

def executar():
    """Fun√ß√£o principal que executa o menu e coordena as a√ß√µes."""
    gestor = GerenciadorDeTarefas()

    while True:
        exibir_menu()
        opcao = input("Escolha uma op√ß√£o: ")

        if opcao == "1":
            gestor.listar_tarefas()
        elif opcao == "2":
            descricao = input("Digite a descri√ß√£o da tarefa:\n(ou 'cancelar', 'voltar', 'sair', '0' para desistir)\n> ").strip()

        # Cancelamento direto
            if descricao.lower() in ["cancelar", "voltar", "sair", "0"]:
                print("‚ùå Cria√ß√£o cancelada. Voltando ao menu principal...")
            elif descricao == "":
                print("‚ö†Ô∏è Voc√™ n√£o digitou nenhuma descri√ß√£o.")
            else:
                # Confirma√ß√£o antes de salvar
                confirmacao = input(f"Voc√™ deseja salvar a tarefa: \"{descricao}\"? (s/n)\n> ").strip().lower()
            if confirmacao == "s":
                gestor.adicionar_tarefa(descricao.capitalize())
            else:
                print("üö´ Tarefa n√£o foi criada. Retornando ao menu...")
    
        elif opcao == "3":
            try:
                indice = int(input("Digite o n√∫mero da tarefa que deseja concluir: "))
                gestor.concluir_tarefa(indice)
            except ValueError:
                    print("‚ö†Ô∏è Por favor, digite um n√∫mero v√°lido.")

        elif opcao == "4":
            try:
                indice = int(input("Digite o n√∫mero da tarefa que deseja excluir: "))
                gestor.excluir_tarefa(indice)
            except ValueError:
                print("‚ö†Ô∏è Por favor, digite um n√∫mero v√°lido.")

        
        elif opcao == "5":
            try:
                indice = int(input("√çndice da tarefa que deseja editar:"))
                nova_descricao = input("Nova descri√ß√£o da tarefa: ")
                gestor.editar_tarefa(indice, nova_descricao)
            except ValueError:
                print("Digite um n√∫mero v√°lido.")
        
        elif opcao == "0":
            print("Encerrando programa...")
            break
        else:
            print("Op√ß√£o inv√°lida. Tente novamente.")

if __name__ == "__main__":
    executar()
